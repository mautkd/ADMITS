#Script que dispara infinitamente no dojot

#! /bin/bash
#t=1
#u=2
#d=`date +%s%N | cut -b1-15`
#d=`date +%s%N`
rodar=0

lista=X_path.csv



#while read dados  
#    do 
#       arq=`echo $dados | awk -F"/" '{print$2}' |awk -F"." '{print$1}'`
#       echo $dados | awk -F"," '{printf$2 $3 "\n" $4 $5 "\n"$6 $7 "\n"}' > $arq.pts
#    done  < $lista
#
#echo -e "\n\n\n Processo finalizado :) \n\n\n"


#echo$d
#sleep 100

while [ $rodar -lt 3600 ]
do

        echo "Apert CTRL+C para Para a Execução";
        t=$((t+RANDOM %40))
        u=$((u+RANDOM %100))
        d=`date +%s%N`
        sleep 1.5
mosquitto_pub -h 10.10.100.133 -p 1883 -t /admin/254b97/attrs -m '{"temperatura":'$t',"umidade":'$u',"tempo":'$d',"data":'1479626031,1895,2435,928722,1063358,344,287,108806,307576,344,287,108806,304680,286,344,179725,171070,1402,1770,821076,985167,1773,1412,620469,1390693,345,275,105128,302252,273,345,177230,165944,2366,1775,613594,1273122,3870,5124,1669523,2185488,296,365,174976,193695,367,296,121659,293712'}'
        echo "Temperatura = "$t" Umidade = "$u" tempo= "$d data = 1479626038,4886,6091,2449410,3732594,4582,3713,1794981,2990025,4586,3714,1793581,2993346,3703,4589,1800108,2836555,4059,5043,2112857,3033260,5031,4060,1932923,3527605,4502,3707,1721892,3063693,3696,4505,1847872,2697197,6010,4796,2272082,4102361,5906,7426,3082214,4331494,3483,4223,1705307,2557549,4167,3487,1603670,2822663;
        sleep 1
        t=1
        u=1
        t=$((t+RANDOM %40))
        u=$((u+RANDOM %100))
        d=`date +%s%N`
        sleep 1.5
mosquitto_pub -h 10.10.100.133 -p 1883 -t /admin/254b97/attrs -m '{"temperatura":'$t',"umidade":'$u',"tempo":'$d', "data":'1479626038,4886,6091,2449410,3732594,4582,3713,1794981,2990025,4586,3714,1793581,2993346,3703,4589,1800108,2836555,4059,5043,2112857,3033260,5031,4060,1932923,3527605,4502,3707,1721892,3063693,3696,4505,1847872,2697197,6010,4796,2272082,4102361,5906,7426,3082214,4331494,3483,4223,1705307,2557549,4167,3487,1603670,2822663'}'
done
